# Configuración del Sistema Real-Time Face Swap
# Modifica estos valores según tus necesidades y hardware

[General]
# Nombre del proyecto
project_name = "Real-Time Face Swap"
version = "1.0.0"

[Hardware]
# Configuración de GPU
device_id = 0  # ID de la GPU (0 para la primera)
use_gpu = true
offload_model = false  # True para ahorrar VRAM (más lento)

[Webcam]
# Configuración de captura de webcam
camera_id = 0  # 0 = cámara predeterminada
width = 1280
height = 720
fps = 30
buffer_size = 30  # Tamaño del buffer circular

[Processing]
# Configuración de procesamiento
batch_size = 8  # Número de frames a procesar juntos
clip_len = 25  # Longitud del clip (debe ser 4n+1)
refert_num = 1  # Frames de referencia temporal (1 o 5)

# Parámetros del sampler
sample_solver = "dpm++"  # Solver de difusión
sampling_steps = 15  # Pasos de sampling (menos = más rápido)
guide_scale = 1.0  # Escala de guidance (1.0 = sin CFG)
shift = 5.0  # Noise schedule shift

# Prompts (opcional, generalmente vacíos para face swap)
input_prompt = ""
negative_prompt = ""

# Seed para reproducibilidad
seed = 42

[Preprocessing]
# Parámetros de preprocesamiento
resolution_area = [1280, 720]  # Área de resolución objetivo
preprocess_fps = 30
iterations = 3  # Iteraciones para máscara
k = 7  # Kernel size para máscara
w_len = 1  # Ancho de extensión de máscara
h_len = 1  # Alto de extensión de máscara
retarget_flag = false  # Retargeting de pose
use_flux = false  # Usar FLUX para edición

[Paths]
# Rutas (configurar según tu sistema)
# IMPORTANTE: Modifica estas rutas antes de ejecutar
checkpoint_dir = "C:/models/Wan2.2-Animate-14B"
preprocess_checkpoint_dir = "C:/models/Wan2.2-Animate-Process"
reference_image = "C:/path/to/your/reference_face.jpg"
config_file = "../wan/configs/wan_animate_14B.py"

# Directorio temporal (se crea automáticamente)
temp_dir = ""  # Vacío = usar directorio temporal del sistema

[Display]
# Configuración de visualización
show_stats = true  # Mostrar estadísticas por defecto
show_original = false  # Mostrar original por defecto
window_name = "Real-Time Face Swap - Wan2.2"

# Colores de overlay (RGB)
color_text = [255, 255, 255]
color_success = [0, 255, 0]
color_warning = [0, 165, 255]
color_error = [0, 0, 255]

[Performance]
# Configuración de rendimiento según GPU

# Perfiles predefinidos (comentar/descomentar según tu GPU)

# RTX 4090 / A100 (24GB)
# batch_size = 8
# clip_len = 25
# width = 1280
# height = 720
# sampling_steps = 15

# RTX 3090 / 3080 Ti (24GB / 12GB)
# batch_size = 6
# clip_len = 21
# width = 1280
# height = 720
# sampling_steps = 12

# RTX 3080 / 3070 (10GB / 8GB)
# batch_size = 4
# clip_len = 17
# width = 960
# height = 540
# sampling_steps = 10

# RTX 3060 (12GB)
# batch_size = 4
# clip_len = 17
# width = 960
# height = 540
# sampling_steps = 10

[Advanced]
# Opciones avanzadas
t5_cpu = true  # Mantener T5 encoder en CPU (ahorra VRAM)
convert_model_dtype = false  # Convertir tipo de datos del modelo
use_relighting_lora = false  # Usar LoRA de relighting

# FSDP (Fully Sharded Data Parallel) - solo para multi-GPU
t5_fsdp = false
dit_fsdp = false

# Sequence Parallel - para multi-GPU
ulysses_size = 1  # 1 = sin SP, >1 = con SP

[Logging]
# Configuración de logs
log_level = "INFO"  # DEBUG, INFO, WARNING, ERROR
log_to_file = false
log_file = "realtime_face_swap.log"

[Debug]
# Opciones de depuración
save_preprocessed = false  # Guardar frames preprocesados
save_generated = false  # Guardar frames generados
verbose = false  # Salida verbose
